var api="https://services7.arcgis.com/nuPvVz1HGGfa0Eh7/arcgis/rest/services/korona_tapauksia_ynteensa/FeatureServer/0/query?where=1%3D1&outFields=sairaanhoitopiiri,date,tapauksia_yhteensa,Vaesto,Ilmaantuvuus,testimaara_yhteensa,testimaara_suhde,tapauksia_suhde_testimaara,tapauksia_14vrk,ilmaantuvuus_14vrk,tapauksia_ed14vrk,ilmaantuvuus_ed14vrk,tapauksia&returnGeometry=false&outSR=4326&f=json";function getJson(shp){var xmlhttp=new XMLHttpRequest;xmlhttp.open("GET",api,!0),xmlhttp.send(),xmlhttp.onreadystatechange=function(){if(4==xmlhttp.readyState&&200==xmlhttp.status){let list=JSON.parse(xmlhttp.responseText).features,data;showData(JSON.parse(xmlhttp.responseText).features[shp].attributes,list,shp)}else document.querySelector("#app").innerHTML="Something went horribly wrong."}}function showData(data,list,shp){var el=document.querySelector("#app");let asd=data.date,dl=JSON.parse(asd);date=new Date(dl).toUTCString();for(var html=`\n    <div class="container">\n        \n    \n    <table class="table table-bordered">\n<thead class ="table-dark">\n  <tr>\n    <th colspan="3"><h1>${data.sairaanhoitopiiri}</h1></th>\n  </tr>\n</thead>\n<tbody>\n  \n  <tr>\n    <td>Väestö</td>\n    <td>${data.Vaesto}</td>\n    <td rowspan="11"><img src="images/img${shp}.png" alt="${data.sairaanhoitopiiri}"></td>\n  </tr>\n  <tr>\n    <td>Ilmaantuvuus</td>\n    <td>${data.Ilmaantuvuus}</td>\n  </tr>\n  <tr>\n    <td>Tapauksia 14vrk</td>\n    <td>${data.tapauksia_14vrk}</td>\n  </tr>\n  <tr>\n    <td>Ilmaantuvuus 14vrk</td>\n    <td>${data.ilmaantuvuus_14vrk}</td>\n  </tr>\n  <tr>\n    <td>Tapaukset / edelliset 14vrk</td>\n    <td>${data.tapauksia_ed14vrk}</td>\n  </tr>\n  <tr>\n    <td>Ilmaantuvuus edelliset 14vrk</td>\n    <td>${data.ilmaantuvuus_ed14vrk}</td>\n  </tr>\n  <tr>\n    <td>Tapauksia Yhteensä</td>\n    <td>${data.tapauksia_yhteensa}</td>  \n  </tr>\n  <tr>\n    <td>Päivitetty</td>\n    <td>${date}</td>\n  </tr>\n  <tr>\n  <td colspan="3">\n  <select onchange="getJson(value)" name="selector" id="selector">   \n    \n    <option value="" disabled selected> Valitse sairaanhoitopiiri </option>`,i=0;i<list.length;i++)html+=`<option value="${i}">${list[i].attributes.sairaanhoitopiiri}</option>`;html+="</select><br>\n  </td>\n  </tr>\n  \n</tbody>\n</table>\n    </div>\n    ",el.innerHTML=html}function getData(){let shp;showData(document.querySelector("select").value)}getJson(20);